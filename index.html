<!DOCTYPE html>
<html>

	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="description" content="Workreport : ">

		<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
		<script type="text/javascript" src="javascripts/d3.v3.js"></script>
		<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.8/require.min.js"></script>
		<title>Workreport</title>

		<script>
			function getTimings(activity, data){
				var values = [];
				var days = Object.keys(data[activity]);
				var L = days.length;
				for(i=0;i<L;i++){
					values.push(data[activity][days[i]]);
				}

				return [days, values]
			}
			function getEventsAnnotations(data){
				var events_dates = [];
				var events_names = Object.keys(data['events']);
				var L = events_names.length;
				var annotation_list = [];
				for(i=0;i<L;i++){
					events_dates.push(data['events'][events_names[i]]);
					annotation_list.push(
					{
						x: data['events'][events_names[i]],
						text: events_names[i],
						showarrow: true,
						ay: -100,
						align: 'left',
						font: {
							family: 'Courier New, monospace',
							size: 12,
							color: '#000000'
						},
						textangle: -90,
						yanchor: 'top'
					})
				}

				return annotation_list
			}
		</script>

	</head>

	<body>

		<!-- HEADER -->
		<div id="header_wrap" class="outer">
				<header class="inner">
					<a id="forkme_banner" href="https://github.com/lupoglaz/WorkReport">View on GitHub</a>

					<h1 id="project_title">Workreport</h1>
					<h2 id="project_tagline"></h2>
				</header>
		</div>

		<!-- MAIN CONTENT -->
		<div id="main_content_wrap" class="outer">
			<section id="main_content" class="inner">
				<h3>
				<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Total time spent coding and pausing.</h3>

				<p>
					This plot shows the total time I spent coding and the time I did nothing.
				</p>

				<div id="timingsPlot" style="width: 100%; height: 400px;"><!-- Plotly chart will be drawn inside this DIV --></div>

				<script>

					
					d3.json('json/code_pause_timings.json', function(data){
						
						
						var days_values_code = getTimings('code', data);
						
						var codedata = 
							{
								x: days_values_code[0],
								y: days_values_code[1],
								name: 'code',
								type: 'bar',
								//mode: 'lines+markers',
								marker: {
									color: 'rgba(100,200,140,0.7)',
								}
							}
						

						var days_values_pause = getTimings('pause', data);
						var pausedata =
							{
								x: days_values_pause[0],
								y: days_values_pause[1],
								name: 'pause',
								type: 'bar',
								//mode: 'lines+markers',
								marker: {
									color: 'rgba(250,200,100,0.7)',
								}
							}
						events_annotations = getEventsAnnotations(data)
						var layout = {
							annotations: events_annotations,
					        title:'Code and pause timings',
					        xaxis: {
								title: 'Date',
								showgrid: false,
								zeroline: false,
								type: 'date'
							},
							yaxis: {
								title: 'Hours',
								showgrid: false,
								zeroline: false
							},
							barmode: 'stack'
					    };
						var traces = [codedata, pausedata];
						Plotly.newPlot('timingsPlot', traces, layout);
					});

					</script>
				<h3>
				<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Come and leave times.</h3>

				<p>
					This plot shows when I come and leave from uni.
				</p>

				<div id="startLeavePlot" style="width: 100%; height: 400px;"><!-- Plotly chart will be drawn inside this DIV --></div>
				<script>
				d3.json('json/start_leave_timings.json', function(data){
						
						
						var days_values_start = getTimings('start', data);
						var startdata = 
							{
								x: days_values_start[0],
								y: days_values_start[1],
								name: 'start',
								//type: 'bar',
								mode: 'lines+markers',
								marker: {
									color: 'rgba(100,100,140,0.9)',
								}
							}
						

						var days_values_leave = getTimings('leave', data);
						var leavedata =
							{
								x: days_values_leave[0],
								y: days_values_leave[1],
								name: 'leave',
								//type: 'bar',
								mode: 'lines+markers',
								marker: {
									color: 'rgba(250,200,100,0.9)',
								}
							}
						var days_values_total = getTimings('total_time', data);
						var totaldata =
							{
								x: days_values_total[0],
								y: days_values_total[1],
								name: 'total time at work',
								type: 'bar',
								yaxis: 'y2',
								//mode: 'lines+markers',
								marker: {
									color: 'rgba(250,100,100,0.4)',
								}
							}
						events_annotations = getEventsAnnotations(data)
						var layout = {
						        title:'Time of start and leave the uni',
						        annotations: events_annotations,
						        xaxis: {
									title: 'Date',
									showgrid: false,
									zeroline: false,
									type: 'date'
								},
								yaxis: {
									title: 'Start/leave hours',
									showgrid: false,
									zeroline: false,
									range: [5.0,24.0]
								},
								yaxis2: {
								    title: 'Total time at work',
								    titlefont: {color: 'rgb(148, 103, 189)'},
								    tickfont: {color: 'rgb(148, 103, 189)'},
								    side: 'right',
								    showgrid: false,
								    overlaying: 'y',
								  },
								barmode: 'stack'
						    };
						var traces = [startdata, leavedata, totaldata];
						Plotly.newPlot('startLeavePlot', traces, layout);
					});
					</script>

			</section>
		</div>

		<!-- FOOTER  -->
		<div id="footer_wrap" class="outer">
			<footer class="inner">
				<p class="copyright">Workreport maintained by <a href="https://github.com/lupoglaz">lupoglaz</a></p>
				<p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
			</footer>
		</div>

	</body>
</html>
